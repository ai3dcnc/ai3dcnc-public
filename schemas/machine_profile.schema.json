{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://ai3dcnc.org/schemas/machine_profile.schema.json",
  "title": "ai3dcnc machine profile v0.1-lite",
  "type": "object",
  "required": ["name","model","vendor","units","supported_ops","faces_supported","limits","tcn"],
  "additionalProperties": false,
  "properties": {
    "name":   { "type":"string", "minLength":1 },
    "model":  { "type":"string", "minLength":1 },
    "vendor": { "type":"string", "minLength":1 },
    "units":  { "type":"string", "enum":["mm"] },
    "supported_ops": {
      "type":"array",
      "minItems": 1,
      "uniqueItems": true,
      "items": { "type":"string", "enum":["DRILL","SLOT","PROFILE","SAW"] }
    },
    "z_sign": { "type":"string", "enum":["down_negative","down_positive"], "default":"down_negative" },
    "faces_supported": {
      "type":"array",
      "minItems": 1,
      "uniqueItems": true,
      "items": { "type":"integer", "minimum":1, "maximum":7 }
    },
    "limits": {
      "type":"object",
      "required":["drill_dia_mm","slot_width_mm","z_mm"],
      "additionalProperties": false,
      "properties":{
        "drill_dia_mm": { "type":"object", "required":["min","max"], "additionalProperties": false,
          "properties":{"min":{"type":"number","minimum":1},"max":{"type":"number","minimum":1}} },
        "slot_width_mm":{ "type":"object", "required":["min","max"], "additionalProperties": false,
          "properties":{"min":{"type":"number","minimum":1},"max":{"type":"number","minimum":1}} },
        "z_mm":         { "type":"object", "required":["min","max"], "additionalProperties": false,
          "properties":{"min":{"type":"number"},"max":{"type":"number"}} }
      }
    },
    "tools": {
      "type":"array",
      "items": {
        "type":"object",
        "required":["id","name"],
        "additionalProperties": false,
        "properties":{
          "id":   { "type":"string" },
          "name": { "type":"string" },
          "dia_mm": { "type":"number" },
          "rpm": { "type":"number" },
          "feed_mm_min": { "type":"number" }
        }
      }
    },
    "tcn": {
      "type":"object",
      "required":["version"],
      "additionalProperties": false,
      "properties":{
        "version": { "type":"string", "pattern":"^[0-9]{2}\\.[0-9]{2}$" },
        "header_comment": { "type":"string" }
      }
    }
  }
}
